{
  "project": "EatPal",
  "branchName": "ralph/platform-hardening-v2",
  "description": "Platform Hardening & Quality Improvements - Comprehensive security remediation, performance optimization, UI/UX consistency fixes, and accessibility improvements identified through a full-spectrum platform audit. Covers critical credential rotation, CORS hardening, SSRF prevention, dependency vulnerability patching, AppContext performance overhaul, bundle optimization, dark mode fixes, form UX standardization, and navigation/feedback consistency.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Remove live credentials from wrangler.toml and rotate keys",
      "description": "As a security engineer, I want all real credentials removed from version-controlled files so that production secrets are not exposed in the git history.",
      "acceptanceCriteria": [
        "Replace the real Supabase anon key in wrangler.toml (line 12 comment) with a placeholder: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.XXXXXXXX",
        "Replace the real Stripe publishable key in wrangler.toml (line 14 comment) with a placeholder: pk_live_XXXXXXXXXXXXXXXX",
        "Search entire codebase for any other real API keys, JWTs, or secrets and replace with placeholders",
        "Verify no .env files are tracked in git",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Fix wildcard CORS on all edge functions",
      "description": "As a security engineer, I want CORS restricted to our domain so that third-party websites cannot make authenticated requests to our API.",
      "acceptanceCriteria": [
        "Replace Access-Control-Allow-Origin: * with the production domain https://tryeatpal.com in all edge functions under functions/",
        "Add development origin http://localhost:8080 conditionally based on environment",
        "Create a shared corsHeaders utility in functions/_shared/cors.ts to avoid duplication",
        "All 14+ edge functions use the shared CORS headers",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Add JWT authentication to unauthenticated edge functions",
      "description": "As a security engineer, I want all privileged edge functions to require authentication so that anonymous users cannot consume API credits or write to storage.",
      "acceptanceCriteria": [
        "Add JWT verification to functions/generate-blog-content/index.ts",
        "Add JWT verification to functions/generate-social-content/index.ts",
        "Add JWT verification to functions/update-blog-image/index.ts",
        "Add JWT verification to functions/parse-grocery-image/index.ts",
        "Add JWT verification to functions/parse-recipe/index.ts",
        "Create a shared auth helper in functions/_shared/auth.ts to reduce duplication",
        "All functions return 401 for missing/invalid JWT",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Fix SSRF vulnerabilities in parse-recipe and update-blog-image",
      "description": "As a security engineer, I want server-side URL fetching protected against SSRF so that attackers cannot probe internal networks or cloud metadata endpoints.",
      "acceptanceCriteria": [
        "Add URL validation to functions/parse-recipe/index.ts that blocks private IP ranges (10.x, 172.16-31.x, 192.168.x, 127.x, 169.254.x, fd00::/8, ::1)",
        "Add URL validation to functions/update-blog-image/index.ts with the same private IP blocking",
        "Block cloud metadata URLs (169.254.169.254)",
        "Only allow http: and https: protocols",
        "Add URL domain allowlist or block known dangerous hosts",
        "Create shared URL validation utility in functions/_shared/url-validator.ts",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Fix create-checkout to use JWT user_id instead of client-supplied user_id",
      "description": "As a security engineer, I want the checkout flow to use the verified JWT identity so that users cannot create subscriptions under another user's account.",
      "acceptanceCriteria": [
        "In functions/create-checkout/index.ts, extract user.id from the verified JWT (supabaseClient.auth.getUser())",
        "Use the JWT-derived user_id for Stripe metadata, client_reference_id, and user_subscriptions upsert",
        "Ignore or remove the user_id field from the request body",
        "Return 401 if JWT verification fails",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Fix Stripe webhook signature to use constant-time comparison",
      "description": "As a security engineer, I want webhook signature verification to use constant-time comparison to prevent timing attacks.",
      "acceptanceCriteria": [
        "In functions/stripe-webhook/index.ts, replace the string equality check (computed === expectedSig) with crypto.subtle.timingSafeEqual or equivalent constant-time comparison",
        "Encode both strings to Uint8Array before comparison",
        "Handle length mismatch case securely (return false without leaking info)",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Fix overly permissive RLS INSERT policies on security-critical tables",
      "description": "As a security engineer, I want RLS policies to enforce proper authorization so that users cannot insert arbitrary data into system tables.",
      "acceptanceCriteria": [
        "Create a new Supabase migration file",
        "Fix login_history INSERT policy to require auth.uid() = user_id instead of WITH CHECK (true)",
        "Fix login_history UPDATE policy to require auth.uid() = user_id",
        "Fix security_audit_logs INSERT policy to require auth.uid() IS NOT NULL",
        "Fix rate_limits policy to restrict to service role only (remove FOR ALL USING (true))",
        "Fix automation_email_queue policy to restrict to admin role only",
        "Fix backup_logs policy to restrict to admin role only",
        "Fix blog_comments INSERT to require auth.uid() IS NOT NULL to prevent anonymous spam",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Fix high-severity dependency vulnerabilities",
      "description": "As a developer, I want all critical and high-severity dependency vulnerabilities patched so that the application is not exposed to known exploits.",
      "acceptanceCriteria": [
        "Update react-router-dom to 6.31+ to fix XSS via open redirect (GHSA-2w69-qvjg-hvjx)",
        "Update or replace jspdf to fix path traversal CVE",
        "Remove @modelcontextprotocol/sdk if not used in the web app (has ReDoS + data leak vulns)",
        "Remove jsonwebtoken from dependencies if not imported in src/",
        "Run npm audit and resolve all critical and high vulnerabilities where possible",
        "npm run build succeeds",
        "All existing tests pass"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Fix edge function error messages to not leak internal details",
      "description": "As a security engineer, I want error responses from edge functions to be generic so that internal implementation details are not exposed to attackers.",
      "acceptanceCriteria": [
        "In all edge function catch blocks, return generic error messages to clients: 'Internal server error'",
        "Log detailed error information server-side using console.error",
        "Remove error.message from client-facing 500 responses in all functions/*/index.ts files",
        "Keep 4xx error messages informative but not implementation-specific",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Fix HTML injection in blog content generation template",
      "description": "As a security engineer, I want user-supplied content HTML-escaped before template interpolation so that stored XSS is prevented.",
      "acceptanceCriteria": [
        "In functions/generate-blog-content/index.ts, create an escapeHtml() utility that escapes &, <, >, and \" characters",
        "Apply escapeHtml() to topic and keywords before interpolating into HTML templates",
        "Apply the same escaping in generate-social-content if applicable",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Fix geolocation API call to use HTTPS instead of HTTP",
      "description": "As a security engineer, I want all external API calls to use HTTPS so that data is not exposed to man-in-the-middle attacks.",
      "acceptanceCriteria": [
        "In src/lib/login-history.ts, change http://ip-api.com to https://ip-api.com or switch to an HTTPS-supporting provider",
        "If ip-api.com does not support HTTPS on free tier, switch to ipinfo.io or similar",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Split AppContext into domain-specific contexts for performance",
      "description": "As a developer, I want the monolithic AppContext split into focused domain contexts so that components only re-render when their specific data changes.",
      "acceptanceCriteria": [
        "Create src/contexts/FoodsContext.tsx with foods state, addFood, updateFood, deleteFood, addFoods, updateFoods",
        "Create src/contexts/KidsContext.tsx with kids state, addKid, updateKid, deleteKid, activeKidId, setActiveKidId",
        "Create src/contexts/RecipesContext.tsx with recipes state, addRecipe, updateRecipe, deleteRecipe",
        "Create src/contexts/PlanContext.tsx with planEntries state, addPlanEntry, updatePlanEntry, deletePlanEntry, copyWeekPlan, deleteWeekPlan",
        "Create src/contexts/GroceryContext.tsx with groceryItems state, addGroceryItem, updateGroceryItem, deleteGroceryItem",
        "Keep AppContext as a thin wrapper that re-exports from domain contexts for backward compatibility",
        "Wrap context values in useMemo to prevent unnecessary re-renders",
        "Wrap all handler functions in useCallback",
        "Use functional updater pattern for all setState calls (e.g., setFoods(prev => [...prev, newFood]))",
        "All existing tests pass",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Add debounced localStorage persistence and fix stale closure bugs",
      "description": "As a user, I want state updates to be reliable even during rapid interactions so that data is not lost when performing quick successive actions.",
      "acceptanceCriteria": [
        "Debounce the save-to-storage effect in AppContext (or domain contexts) with 500ms delay",
        "Replace all stale closure state updates with functional updater pattern: setFoods(prev => [...prev, newFood]) instead of setFoods([...foods, newFood])",
        "Fix the auth-change data reload to include date-range filtering on plan_entries (same as initial load)",
        "Batch the recipe migration localStorage check to use a single bulk insert instead of individual inserts in a loop",
        "Typecheck passes",
        "All existing tests pass"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Optimize Supabase queries to use column-specific selects and pagination",
      "description": "As a user, I want the app to load quickly even with large datasets so that performance doesn't degrade over time.",
      "acceptanceCriteria": [
        "Replace all .select('*') calls in AppContext/domain contexts with column-specific selects for list views",
        "Add .limit(200) or cursor-based pagination to foods, recipes, and grocery_items queries",
        "Keep plan_entries date-range filtering (already partially implemented)",
        "Add load-more pattern or infinite scroll to Pantry page for foods beyond the initial limit",
        "Typecheck passes",
        "All existing tests pass"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Remove unused dependencies and optimize imports",
      "description": "As a developer, I want unused dependencies removed and imports optimized so that the bundle is smaller and tree-shaking is effective.",
      "acceptanceCriteria": [
        "Remove jsonwebtoken from package.json if not imported in src/",
        "Remove @modelcontextprotocol/sdk from package.json if not imported in src/",
        "Replace react-icons usage in Auth.tsx with inline SVGs or individual icon packages to avoid bundling the entire react-icons library",
        "Replace import * as Sentry with named imports in src/lib/sentry.tsx and src/lib/api-errors.ts",
        "Verify html2canvas and jspdf are dynamically imported (not statically) in their consuming components",
        "npm run build succeeds",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Remove unoptimized PNG files and fix asset preload conflicts",
      "description": "As a developer, I want the public directory optimized so that deployment size is minimized and preloads are correct.",
      "acceptanceCriteria": [
        "Remove splash.png (1.9MB) if splash.webp exists and is used instead",
        "Remove Cover.png (1.9MB) if Cover.webp exists and is used instead",
        "Remove Palette.png (1.3MB) if Palette.webp exists and is used instead",
        "Remove Icon-Large.png (892KB) if Icon-Large.webp exists and is used instead",
        "Remove favicon_io.zip development artifact from public/",
        "Fix conflicting preload: align public/_headers preload with index.html preload (both should reference the same format - prefer .webp)",
        "Remove preload for /assets/fonts/inter-var.woff2 if fonts are loaded from Google CDN",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Switch build minifier from Terser to esbuild and add hidden source maps",
      "description": "As a developer, I want faster builds and working Sentry source maps so that CI is fast and production errors are debuggable.",
      "acceptanceCriteria": [
        "In vite.config.ts, replace minify: 'terser' with minify: 'esbuild'",
        "Replace terserOptions with esbuild: { drop: ['console', 'debugger'] } for production",
        "Change sourcemap from mode === 'development' to 'hidden' for production (generates .map files for Sentry but doesn't expose them to browsers)",
        "Verify Sentry Vite plugin can find and upload source maps",
        "npm run build succeeds",
        "Build time is measurably faster"
      ],
      "priority": 17,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Standardize on Sonner toast and remove duplicate toast system",
      "description": "As a user, I want consistent toast notifications so that feedback looks the same regardless of which feature triggered it.",
      "acceptanceCriteria": [
        "Identify all 23 files importing from @/hooks/use-toast and migrate them to import { toast } from 'sonner'",
        "Remove the shadcn Toaster component from App.tsx (keep only Sonner)",
        "Remove src/hooks/use-toast.ts if no longer imported",
        "Remove src/components/ui/toaster.tsx if no longer imported",
        "All toast calls use the sonner API: toast.success(), toast.error(), toast.loading()",
        "Typecheck passes",
        "All existing tests pass"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Replace window.confirm() with AlertDialog for destructive actions",
      "description": "As a user, I want confirmation dialogs to match the app's design system so that the experience is consistent and professional.",
      "acceptanceCriteria": [
        "Replace window.confirm() in src/components/AIMealCoach.tsx with AlertDialog from shadcn",
        "Replace window.confirm() in src/components/admin/FeatureFlagDashboard.tsx",
        "Replace window.confirm() in src/components/admin/NutritionManager.tsx",
        "Replace window.confirm() in src/components/admin/PromotionalCampaignManager.tsx",
        "Replace window.confirm() in src/components/admin/PromptTemplateManager.tsx",
        "Replace window.confirm() in src/components/admin/ComplementarySubscriptionManager.tsx",
        "Replace window.confirm() in src/components/admin/UserRolesManager.tsx",
        "Replace window.confirm() in src/pages/dashboard/ProfessionalSettings.tsx",
        "Replace window.confirm() in src/pages/dashboard/Billing.tsx",
        "Replace window.confirm() in src/components/billing/SubscriptionOverview.tsx",
        "All AlertDialogs use destructive variant for delete/cancel actions",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Add confirmation dialogs to unprotected delete actions",
      "description": "As a user, I want a confirmation prompt before irreversible deletions so that I don't accidentally lose data.",
      "acceptanceCriteria": [
        "Add AlertDialog confirmation before delete in src/components/pantry/PantryListItem.tsx (currently calls onDelete directly)",
        "Add AlertDialog confirmation before delete in src/components/EnhancedRecipeCard.tsx (currently calls onDelete directly)",
        "Add AlertDialog confirmation before delete in src/components/admin/AISettingsManager.tsx (handleDeleteModel)",
        "All confirmation dialogs clearly state what will be deleted",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Fix dead links to /notifications and /help routes",
      "description": "As a user, I want all navigation links to work so that I don't encounter 404 pages.",
      "acceptanceCriteria": [
        "Fix NotificationBell component (src/components/subscription/NotificationBell.tsx line 252) - either create a /notifications route or change to an in-app panel/dialog",
        "Fix SupportWidget component (src/components/SupportWidget.tsx line 199) - either create a /help route or change the link to a valid destination",
        "Verify no other navigation links point to nonexistent routes",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Fix hardcoded colors breaking dark mode across 50+ components",
      "description": "As a user, I want the app to look correct in dark mode so that hardcoded white backgrounds and gray text don't create poor contrast.",
      "acceptanceCriteria": [
        "Replace bg-white with bg-background (or bg-card) in src/components/SuccessAnimations.tsx",
        "Replace text-gray-900/600/500 with text-foreground/muted-foreground in SuccessAnimations.tsx",
        "Fix src/components/ProductShowcase3D.tsx hardcoded bg-white, bg-gray-100, to-white gradient",
        "Fix src/components/HarmonizedFoodDisplay.tsx text-gray-600/700/500",
        "Fix src/components/MealSuggestionCard.tsx bg-gray-100 text-gray-700",
        "Fix src/components/admin/BudgetAnalyticsDashboard.tsx bg-gray-200, bg-gray-100, text-gray-800",
        "Fix src/components/admin/SupportPerformanceDashboard.tsx bg-gray-200 progress bars",
        "Fix src/components/admin/ContentOptimizer.tsx bg-gray-100, text-gray-800, bg-gray-50",
        "Replace text-red-500 with text-destructive in src/components/ui/form-field.tsx (lines 53, 62)",
        "Replace border-red-500 with border-destructive in form components (AddFoodDialog, BulkAddFoodDialog, CreateCollectionDialog)",
        "Typecheck passes"
      ],
      "priority": 22,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Fix touch target sizes below 44px minimum on interactive elements",
      "description": "As a mobile user, I want interactive elements large enough to tap accurately so that I don't accidentally hit the wrong button.",
      "acceptanceCriteria": [
        "Increase pantry quantity stepper buttons in src/components/pantry/PantryListItem.tsx from h-6 w-6 to min h-10 w-10",
        "Increase pantry action buttons (edit/delete) from h-7 w-7 to min h-10 w-10",
        "Increase quantity preset buttons in AddFoodDialog.tsx from h-7 to min h-10",
        "Increase delete aisle button in ManageStoreAislesDialog.tsx from h-8 w-8 to min h-10 w-10",
        "Ensure all button size='sm' variants have min-height of 40px (update the button component or add touch-target wrapper)",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Add DialogDescription to all dialogs missing it for accessibility",
      "description": "As a screen reader user, I want dialogs to announce their purpose so that I understand what the dialog is for.",
      "acceptanceCriteria": [
        "Add DialogDescription (can be visually hidden with sr-only) to src/components/AddFoodDialog.tsx",
        "Add DialogDescription to src/components/FoodSelectorDialog.tsx",
        "Add DialogDescription to src/components/QuickSuggestionsPanel.tsx",
        "Add DialogDescription to src/components/RecipeViewWithScaling.tsx",
        "Add DialogDescription to src/components/ReportHistory.tsx",
        "Add DialogDescription to src/components/recipes/InstructionStepBuilder.tsx",
        "Add DialogDescription to src/components/recipes/SmartGroceryDialog.tsx",
        "Add DialogDescription to src/components/ui/form-dialog.tsx",
        "Typecheck passes"
      ],
      "priority": 24,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Consolidate duplicate EmptyState components into a single canonical version",
      "description": "As a developer, I want one consistent EmptyState component so that empty states look uniform across the app.",
      "acceptanceCriteria": [
        "Keep src/components/ui/EmptyState.tsx as the canonical version (it has Card wrapper, preview slot, and proper sizing)",
        "Migrate src/components/EmptyState.tsx specialized variants (EmptyRecipes, EmptyPantry, EmptyGroceryList, EmptyMealPlan, EmptyChildren, EmptySearchResults) to use the canonical version with Lucide icons instead of inline SVGs",
        "Update all imports across the codebase to use the canonical component",
        "Remove the old src/components/EmptyState.tsx after migration",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Consolidate duplicate Breadcrumb components and add to dashboard pages",
      "description": "As a user, I want consistent breadcrumb navigation so that I can easily understand where I am in the app.",
      "acceptanceCriteria": [
        "Consolidate src/components/BreadcrumbNavigation.tsx and src/components/Breadcrumbs.tsx into a single component",
        "Keep the version that generates JSON-LD schema data",
        "Add breadcrumbs to all dashboard pages (18 routes) using generateBreadcrumbsFromPath or manual items",
        "Add breadcrumbs to blog pages (Blog listing, BlogPost detail)",
        "Add breadcrumbs to quiz result pages",
        "Remove the redundant breadcrumb component",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Add autoFocus to primary input in all dialog forms",
      "description": "As a user, I want the cursor to automatically focus the first input when a dialog opens so that I can start typing immediately.",
      "acceptanceCriteria": [
        "Add autoFocus to the primary input in AddFoodDialog",
        "Add autoFocus to CreateGroceryListDialog",
        "Add autoFocus to ManageKidsDialog",
        "Add autoFocus to CreateCollectionDialog",
        "Add autoFocus to BulkAddFoodDialog",
        "Add autoFocus to ImportRecipeDialog",
        "Add autoFocus to SaveMealPlanTemplateDialog",
        "Add autoFocus to CreateStoreLayoutDialog",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Standardize form validation pattern across all forms",
      "description": "As a developer, I want a consistent form validation approach so that error display is uniform and theme-aware.",
      "acceptanceCriteria": [
        "Migrate ManageKidsDialog from toast-only validation to inline field-level errors using FormField or useFormValidation",
        "Ensure all form error indicators use text-destructive and border-destructive (not text-red-500, border-red-500)",
        "Verify AddFoodDialog uses consistent validation pattern with inline errors",
        "All forms show field-level errors adjacent to the problematic field, not just toast messages",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Fix navigation consistency between sidebar and header nav",
      "description": "As a user, I want navigation to be consistent across sidebar and header so that I can find features in the same place regardless of navigation method.",
      "acceptanceCriteria": [
        "Align AppSidebar route groupings with Navigation header groupings (same items in same categories)",
        "Ensure mobile 'More' menu in Navigation includes all routes that AppSidebar shows (Account Settings, Accessibility Settings)",
        "Fix CommandPalette to navigate to /dashboard/* paths instead of convenience aliases to avoid URL inconsistency",
        "Typecheck passes"
      ],
      "priority": 29,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Remove 36 @ts-nocheck suppressions and fix underlying type errors",
      "description": "As a developer, I want TypeScript checking enabled on all files so that type errors are caught at compile time.",
      "acceptanceCriteria": [
        "Remove @ts-nocheck from all 36 files listed in the codebase",
        "Fix the underlying TypeScript errors in each file (add proper types for Supabase tables, replace any with proper types)",
        "If admin tables are not yet in generated types, add type declarations in src/types/ as interim solution",
        "npx tsc --noEmit passes with zero errors",
        "npm run build succeeds"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Add list virtualization for large data pages",
      "description": "As a user with lots of data, I want the Pantry and Grocery pages to render smoothly so that scrolling is not laggy.",
      "acceptanceCriteria": [
        "Install @tanstack/react-virtual as a dependency",
        "Add virtualized list rendering to Pantry page (src/pages/Pantry.tsx) for the food item list",
        "Add virtualized list rendering to Grocery page for the grocery items list",
        "Maintain existing filter/search/sort functionality with virtualization",
        "Fallback gracefully for lists under 50 items (skip virtualization for small lists)",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "Replace framer-motion with CSS transitions on data-heavy list pages",
      "description": "As a user, I want list pages to feel responsive even with many items so that animation overhead doesn't cause jank.",
      "acceptanceCriteria": [
        "Replace framer-motion AnimatePresence + motion.div in Pantry.tsx with CSS transitions/animations",
        "Use CSS @keyframes for enter/exit animations (fade-in, slide-up)",
        "Keep framer-motion for complex orchestrated animations (landing page, onboarding) but not for list item rendering",
        "Remove the framer-motion import from Pantry.tsx",
        "Typecheck passes"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Fix permanent will-change CSS property on meal items",
      "description": "As a developer, I want GPU memory used efficiently so that the app performs well on low-end devices.",
      "acceptanceCriteria": [
        "In src/index.css, remove will-change: transform, box-shadow from .gsap-meal-item class",
        "Apply will-change only during animation via JavaScript (add before animation starts, remove after completion)",
        "Or use CSS :hover/:active pseudo-selectors to apply will-change only during interaction",
        "Typecheck passes"
      ],
      "priority": 33,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Fix mobile-specific UI issues: hidden badges, nav padding, desktop overflow",
      "description": "As a mobile user, I want all relevant information visible and the UI not cut off so that I have a complete experience on my phone.",
      "acceptanceCriteria": [
        "Show food safety badges on mobile in PantryListItem.tsx (remove hidden sm:flex or replace with responsive layout)",
        "Add pb-16 (or equivalent safe-area padding) to main content area to prevent content being hidden behind the bottom navigation bar",
        "Add horizontal overflow menu or dropdown for desktop header nav when items exceed available width (instead of overflowing)",
        "Typecheck passes"
      ],
      "priority": 34,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Fix CSP to remove unsafe-inline and unsafe-eval where possible",
      "description": "As a security engineer, I want the Content Security Policy hardened so that XSS attacks are mitigated at the browser level.",
      "acceptanceCriteria": [
        "In public/_headers, remove 'unsafe-eval' from script-src if possible (audit which dependencies require it)",
        "If Three.js requires eval, scope the exception narrowly",
        "Remove deprecated Expect-CT header from _headers",
        "Add nonce-based CSP support if Cloudflare Pages supports it, or document why unsafe-inline is still needed",
        "Verify the app still loads correctly with the tightened CSP"
      ],
      "priority": 35,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-036",
      "title": "Wire server-side rate limiting into the login flow",
      "description": "As a security engineer, I want brute-force login prevention enforced server-side so that client-side bypass does not negate rate limiting.",
      "acceptanceCriteria": [
        "In src/pages/Auth.tsx, call the check_rate_limit RPC (supabase.rpc('check_rate_limit', { ... })) before attempting sign-in",
        "If rate limit is exceeded, display the lockout message and prevent the sign-in attempt",
        "Keep client-side rate limiter as a UX-level enhancement (fast feedback)",
        "The server-side check should be the authoritative enforcement",
        "Typecheck passes"
      ],
      "priority": 36,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-037",
      "title": "Remove DOMPurify style attribute allowance in admin email builders",
      "description": "As a security engineer, I want DOMPurify configured to block style attributes so that CSS-based data exfiltration is prevented.",
      "acceptanceCriteria": [
        "Remove 'style' from ALLOWED_ATTR in src/components/admin/EmailSequenceBuilder.tsx DOMPurify config",
        "Remove 'style' from ALLOWED_ATTR in src/components/admin/EmailTemplateBuilder.tsx",
        "If styling is needed, use DOMPurify ALLOW_CSS option with a strict CSS property allowlist",
        "Verify email preview still renders correctly",
        "Typecheck passes"
      ],
      "priority": 37,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-038",
      "title": "Add loading states to dialog submit buttons that lack them",
      "description": "As a user, I want to see feedback when I submit a form so that I know my action is being processed.",
      "acceptanceCriteria": [
        "Add loading spinner to the save button in AddFoodDialog when onSave is in progress",
        "Add loading spinner to the submit button in ManageKidsDialog when addKid/updateKid is in progress",
        "Add disabled state to prevent double-submission during loading",
        "Use the existing LoadingButton component or the Loader2 + disabled pattern",
        "Typecheck passes"
      ],
      "priority": 38,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-039",
      "title": "Consolidate duplicate touch target CSS rules",
      "description": "As a developer, I want touch target sizing defined in one place so that changes are consistent and maintainable.",
      "acceptanceCriteria": [
        "Audit src/index.css and src/styles/mobile-first.css for overlapping touch target rules",
        "Consolidate into a single set of rules in one file",
        "Remove the overly broad blanket rules in mobile-first.css (lines 15-29) that apply min-height/width to ALL buttons, links, and inputs",
        "Replace with targeted utility classes or component-level sizing",
        "Verify touch targets are still appropriately sized on mobile",
        "Typecheck passes"
      ],
      "priority": 39,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-040",
      "title": "Add missing Helmet meta tags to all pages without them",
      "description": "As an SEO specialist, I want every page to have unique title and meta description so that search engines can properly index and display results.",
      "acceptanceCriteria": [
        "Audit all 43 page components for Helmet usage",
        "Add <Helmet> with unique <title> and <meta name='description'> to any pages missing them",
        "Ensure all dashboard pages have descriptive titles in format: 'Page Name - EatPal'",
        "Add Open Graph tags (og:title, og:description) to public-facing pages",
        "Typecheck passes"
      ],
      "priority": 40,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-041",
      "title": "Fix interactive div elements to use proper semantic HTML on Home page",
      "description": "As a keyboard and screen reader user, I want interactive elements to be proper buttons so that I can navigate and activate them with keyboard and assistive technology.",
      "acceptanceCriteria": [
        "Replace the 3 onboarding step <div onClick> elements in src/pages/Home.tsx (lines 226-329) with <button> elements or add role='button', tabIndex={0}, and onKeyDown for Enter/Space",
        "Replace the Quick Action <Card onClick> elements (lines 339, 360) with button-like semantics",
        "Fix the overlay <div onClick> in src/components/GestureTutorial.tsx (line 142) with proper button role and keyboard support",
        "Follow the pattern used in src/components/recipes/RecipeListItem.tsx as a reference implementation",
        "Typecheck passes"
      ],
      "priority": 41,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-042",
      "title": "Fix heading hierarchy on dashboard Home page",
      "description": "As a screen reader user, I want proper heading hierarchy so that I can navigate the page structure efficiently.",
      "acceptanceCriteria": [
        "Add an h1 heading to src/pages/Home.tsx (can be visually hidden with sr-only class if the welcome banner serves as visual heading)",
        "Change h4 headings (lines 240, 276, 314, 347, 368) to h2 for section titles",
        "Ensure heading levels do not skip (h1 > h2 > h3, no h1 > h4 jumps)",
        "Typecheck passes"
      ],
      "priority": 42,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-043",
      "title": "Fix Landing page GSAP animations to respect prefers-reduced-motion",
      "description": "As a user with motion sensitivity, I want scroll animations to be disabled when I request reduced motion so that the landing page doesn't cause discomfort.",
      "acceptanceCriteria": [
        "In src/pages/Landing.tsx, check window.matchMedia('(prefers-reduced-motion: reduce)') before initializing GSAP ScrollTrigger animations (lines 89-146)",
        "If reduced motion is preferred, skip the Y-translation and opacity animations or reduce them to instant state changes",
        "Add reduced-motion media query to the animate-bounce-dynamic CSS class (line 472)",
        "Typecheck passes"
      ],
      "priority": 43,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-044",
      "title": "Fix Pricing page accessibility issues (radiogroup and sr-only contradiction)",
      "description": "As an assistive technology user, I want pricing controls to be properly labeled so that I can understand and interact with billing options.",
      "acceptanceCriteria": [
        "Add role='radio' and aria-checked to child Button elements within the billing cycle toggle role='radiogroup' in src/pages/Pricing.tsx (line 480)",
        "Fix the sr-only + aria-hidden='true' contradiction on line 474 - remove aria-hidden='true' to let screen readers access the content",
        "Typecheck passes"
      ],
      "priority": 44,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-045",
      "title": "Upgrade public lead-magnet pages from Helmet to SEOHead with full metadata",
      "description": "As an SEO specialist, I want high-traffic public pages to have full SEO treatment so that they appear with rich results in search engines.",
      "acceptanceCriteria": [
        "Replace raw <Helmet> with <SEOHead> in src/pages/PickyEaterQuiz.tsx with full OG tags and canonical URL",
        "Replace raw <Helmet> with <SEOHead> in src/pages/BudgetCalculator.tsx with full OG tags and canonical URL",
        "Replace raw <Helmet> with <SEOHead> in src/pages/MealPlanGenerator.tsx with full OG tags and canonical URL",
        "Add appropriate structured data schema components (HowToSchema or SoftwareAppSchema) to these pages",
        "Add noindex meta to authenticated dashboard pages that currently have no Helmet at all",
        "Typecheck passes"
      ],
      "priority": 45,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-046",
      "title": "Audit and fix sitemap.xml for nonexistent routes",
      "description": "As an SEO specialist, I want the sitemap to only contain valid URLs so that search engine crawl budget is not wasted on 404s.",
      "acceptanceCriteria": [
        "Cross-reference all URLs in public/sitemap.xml with routes defined in src/App.tsx",
        "Remove any sitemap entries for routes that do not exist (/features/*, /solutions/*, /resources/*, /about if not defined)",
        "Add any public-facing routes that are missing from the sitemap",
        "Verify the dynamic sitemap edge function (functions/sitemap.xml.ts) has a more complete fallback than just the homepage",
        "Typecheck passes"
      ],
      "priority": 46,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-047",
      "title": "Fix RecipeListItem image alt text for meaningful thumbnails",
      "description": "As a screen reader user, I want recipe images to have descriptive alt text so that I understand what dish is shown.",
      "acceptanceCriteria": [
        "Change alt='' to alt={recipe.name} in src/components/recipes/RecipeListItem.tsx (line 60)",
        "Audit other image components for similar empty alt text on meaningful images",
        "Ensure decorative images retain alt='' (only fix meaningful images)",
        "Typecheck passes"
      ],
      "priority": 47,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-048",
      "title": "Self-host Google Fonts for performance and privacy",
      "description": "As a developer, I want fonts self-hosted so that we eliminate external DNS lookups, improve loading performance, and reduce privacy concerns.",
      "acceptanceCriteria": [
        "Install @fontsource/inter and @fontsource/nunito-sans packages",
        "Import the required font weights (400, 500, 600, 700) in the app entry point",
        "Remove Google Fonts CDN links from index.html (lines 228-248)",
        "Update CSS font-family declarations to reference the local fonts",
        "Verify fonts render correctly",
        "Remove the font preload from public/_headers if it references a CDN path",
        "npm run build succeeds"
      ],
      "priority": 48,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-049",
      "title": "Defer GSAP loading to IntersectionObserver instead of 100ms timer",
      "description": "As a user, I want the landing page to load fast so that JavaScript resources are only loaded when animations will be visible.",
      "acceptanceCriteria": [
        "In src/pages/Landing.tsx, replace the 100ms setTimeout GSAP loading with IntersectionObserver on the first animated section",
        "Only dynamically import GSAP and ScrollTrigger when the animated sections enter the viewport",
        "Maintain existing animation behavior once loaded",
        "Typecheck passes"
      ],
      "priority": 49,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-050",
      "title": "Add aria-live regions to major feature pages for dynamic content updates",
      "description": "As a screen reader user, I want to be notified when data changes on the page so that I don't miss important updates.",
      "acceptanceCriteria": [
        "Add aria-live='polite' region or use AccessibleLoading for loading/data states on Pantry page (food add/delete feedback)",
        "Add aria-live announcements on Grocery page for item checking/unchecking",
        "Add aria-live announcements on Kids page for profile updates",
        "Add aria-live announcement on Planner page for meal plan generation results",
        "Verify sonner toast library provides its own aria-live region (if not, add one)",
        "Typecheck passes"
      ],
      "priority": 50,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-051",
      "title": "Replace placeholder Index page with proper homepage redirect",
      "description": "As a visitor landing on the root URL, I want to see the full landing page instead of a blank placeholder so that I immediately understand EatPal's value proposition and can take action.",
      "acceptanceCriteria": [
        "Replace the generic 'Welcome to Your Blank App' content in src/pages/Index.tsx with a redirect to the Landing page, or render the Landing component directly",
        "Ensure the / route resolves to the full Landing page experience with hero, features, social proof, and CTAs",
        "Verify no SEO impact: canonical URL remains https://tryeatpal.com/",
        "Verify existing links to / still work correctly",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 51,
      "passes": true,
      "notes": "CRITICAL: The Index.tsx page is a generic placeholder that shows 'Welcome to Your Blank App' \u2014 any visitor landing on / sees zero brand messaging, zero value proposition, and zero CTAs. This is the #1 conversion killer on the site."
    },
    {
      "id": "US-052",
      "title": "Add money-back guarantee and trust signals to Pricing page",
      "description": "As a potential customer evaluating pricing, I want to see risk-reduction messaging (money-back guarantee, trust badges) so that I feel confident committing to a paid plan.",
      "acceptanceCriteria": [
        "Add a '30-day money-back guarantee' banner below the pricing cards in src/pages/Pricing.tsx",
        "Add trust signals section with: 'Cancel anytime', 'No long-term contracts', '256-bit SSL encryption', '2,000+ families trust EatPal'",
        "Add a 'Billing FAQ' accordion section below pricing cards with 3-5 common billing questions",
        "Ensure dark mode compatibility (use theme tokens, not hardcoded colors)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 52,
      "passes": true,
      "notes": "Pricing page has zero risk-reduction messaging. Adding trust signals and money-back guarantee typically increases conversion 15-30%."
    },
    {
      "id": "US-053",
      "title": "Add cross-page internal linking for lead magnets on Landing page",
      "description": "As a visitor browsing the landing page, I want to easily discover free tools (Quiz, Budget Calculator, Meal Plan Generator) so that I engage deeper with the brand before signing up.",
      "acceptanceCriteria": [
        "Verify the 'Free Tools' section on Landing.tsx (lines 710-772) links correctly to /picky-eater-quiz, /budget-calculator, and /meal-plan",
        "Add a promotional banner or card in the Landing page hero area or pain points section that highlights the Picky Eater Quiz as a gateway engagement tool",
        "Add 'Try our free tools' link to the desktop navigation header on Landing.tsx between 'Pricing' and 'Sign In'",
        "Add the same link to the mobile menu",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 53,
      "passes": true,
      "notes": "Lead magnets exist but are buried in a section users may never scroll to. Promoting them in navigation dramatically increases engagement and email capture."
    },
    {
      "id": "US-054",
      "title": "Add newsletter email capture to Blog listing and Blog post pages",
      "description": "As a blog reader interested in picky eating content, I want to subscribe to a newsletter so that I receive weekly tips and stay engaged with the brand.",
      "acceptanceCriteria": [
        "Create a reusable NewsletterSignup component in src/components/NewsletterSignup.tsx",
        "Component should include email input, submit button, privacy note, and success/error states",
        "Add the component to src/pages/Blog.tsx above the article grid with copy: 'Get weekly picky eating tips delivered to your inbox'",
        "Add the component to src/pages/BlogPost.tsx after the article content and before related articles",
        "Store email submissions in Supabase (newsletter_subscribers table or use existing mechanism)",
        "Component uses theme-aware styling (bg-card, text-foreground, etc.)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 54,
      "passes": true,
      "notes": "Blog pages have zero email capture. Blog readers are warm leads who are researching picky eating \u2014 capturing their email is a critical conversion touchpoint."
    },
    {
      "id": "US-055",
      "title": "Add contextual CTA after Blog post content to drive signups",
      "description": "As a blog reader who just finished an article, I want to see a relevant next step so that I know how EatPal can help me implement what I just learned.",
      "acceptanceCriteria": [
        "Add a CTA section in src/pages/BlogPost.tsx between the article content and the related articles section",
        "CTA should include: headline 'Ready to put these strategies into action?', brief value prop, and two buttons: 'Start Free Trial' and 'Take the Picky Eater Quiz'",
        "CTA should be visually distinct (use primary gradient background) but not feel intrusive",
        "Responsive design: stack buttons vertically on mobile",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 55,
      "passes": true,
      "notes": "Blog posts end with related articles but no conversion CTA. Every blog post is a missed conversion opportunity."
    },
    {
      "id": "US-056",
      "title": "Add 'What you will learn' intro section to Picky Eater Quiz page",
      "description": "As a visitor starting the quiz, I want to know what insights I'll receive so that I'm motivated to complete all questions.",
      "acceptanceCriteria": [
        "Add an intro/overview section at the top of src/pages/PickyEaterQuiz.tsx before the quiz starts",
        "Include: estimated time (2 minutes), what results include (personality type, tailored strategies, food suggestions), privacy note",
        "Add a 'Start Quiz' button that transitions to the actual quiz questions",
        "Show a brief animation or icon grid showing the 4 personality types as a teaser",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 56,
      "passes": true,
      "notes": "Quiz launches immediately with no context. Setting expectations increases completion rates by 20-40%."
    },
    {
      "id": "US-057",
      "title": "Add search and category filtering to FAQ page",
      "description": "As a visitor with a specific question, I want to search or filter FAQs by category so that I can quickly find my answer without scrolling through all items.",
      "acceptanceCriteria": [
        "Add a search input above the FAQ list in src/pages/FAQ.tsx that filters questions in real-time as the user types",
        "Organize FAQ items into categories: 'Getting Started', 'Features', 'Billing', 'Technical'",
        "Add category filter tabs/buttons that show only questions from the selected category",
        "Show 'No results found. Try a different search or contact us.' when no FAQs match",
        "Maintain existing FAQ schema markup",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 57,
      "passes": true,
      "notes": "FAQ page shows all questions in a flat list with no search or categorization. Users must scroll through everything to find their answer."
    },
    {
      "id": "US-058",
      "title": "Add comparison section to Pricing page showing EatPal vs alternatives",
      "description": "As a potential customer comparing options, I want to see how EatPal compares to alternatives (feeding therapy, meal kits, generic meal planners) so that I understand the unique value.",
      "acceptanceCriteria": [
        "Add a 'Why Choose EatPal?' comparison section to src/pages/Pricing.tsx below the feature comparison table",
        "Include comparison cards for: Traditional feeding therapy ($150/session), Meal kit services ($200+/month), Generic meal planners (not built for picky eaters), and DIY planning (2+ hours/week)",
        "Highlight EatPal's advantages: cost ($9.99/month), specialization (picky eaters), time savings (5 min/day), science-backed approach",
        "Use theme-aware styling",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 58,
      "passes": false,
      "notes": "No competitive positioning anywhere on the site. Users evaluating options need context to understand EatPal's value relative to alternatives."
    },
    {
      "id": "US-059",
      "title": "Add guided onboarding flow that continues across dashboard pages",
      "description": "As a new user who just signed up, I want a step-by-step onboarding flow that guides me through Kids, Pantry, and Planner setup so that I reach my 'aha moment' quickly.",
      "acceptanceCriteria": [
        "Enhance the existing onboarding in src/pages/Home.tsx to show a persistent progress bar at the top of all dashboard pages for new users",
        "Progress steps: 1. Create child profile, 2. Add 5+ safe foods, 3. Generate first meal plan, 4. Create grocery list",
        "Each step links to the relevant page (Kids, Pantry, Planner, Grocery)",
        "Mark steps as completed when the user actually completes them (check kids.length > 0, safeFoods >= 5, planEntries.length > 0, groceryItems.length > 0)",
        "Dismiss onboarding after all steps complete or user explicitly closes it",
        "Store dismissal state in localStorage",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 59,
      "passes": true,
      "notes": "Current onboarding only exists on the Home page and doesn't persist across the app. New users get lost after navigating away from Home."
    },
    {
      "id": "US-060",
      "title": "Add 'Today's Meals' quick-view widget and streak counter to Dashboard Home",
      "description": "As a returning user, I want to see today's planned meals at a glance and my logging streak so that I stay engaged and on track without clicking into the Planner.",
      "acceptanceCriteria": [
        "Ensure the existing TodayMeals component on Home.tsx is prominently placed above the fold",
        "Add a daily streak counter showing consecutive days of logging meal results (e.g., '7 day streak!')",
        "Add celebratory UI (badge color change, small animation) at streak milestones (3, 7, 14, 30 days)",
        "Show encouragement text when streak is broken: 'Log today's meals to start a new streak'",
        "Streak data derived from planEntries with results logged in consecutive days",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 60,
      "passes": true,
      "notes": "Gamification through streaks increases daily engagement by 30-50%. Currently no visible engagement hooks on the dashboard."
    },
    {
      "id": "US-061",
      "title": "Improve empty states across Pantry, Planner, and Grocery pages with actionable guidance",
      "description": "As a new user visiting feature pages for the first time, I want clear, encouraging empty states that tell me exactly what to do so that I don't feel lost or confused.",
      "acceptanceCriteria": [
        "Audit empty states in src/pages/Pantry.tsx \u2014 ensure it shows: illustration/icon, 'Your pantry is empty' heading, 'Add your child's safe foods to get started with meal planning' description, prominent 'Add Food' button, and a tip: 'Start with 5-10 foods your child eats regularly'",
        "Audit empty states in src/pages/Planner.tsx \u2014 when no meals are planned, show: 'No meals planned this week' heading, 'Create a meal plan to see it here' description, 'Generate Meal Plan' and 'Add Meal Manually' buttons",
        "Audit empty states in src/pages/Grocery.tsx \u2014 show: 'Your grocery list is empty' heading, 'Add items from recipes or create a list manually' description, action buttons for both paths",
        "All empty states use consistent design (canonical EmptyState component from src/components/ui/EmptyState.tsx)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 61,
      "passes": false,
      "notes": "Poor empty states are the #1 cause of user drop-off in the first session. Users who don't know what to do next leave and don't come back."
    },
    {
      "id": "US-062",
      "title": "Add social proof testimonials section to Auth page sign-up tab",
      "description": "As a user on the sign-up page, I want to see testimonials and success metrics so that I feel confident creating an account.",
      "acceptanceCriteria": [
        "Verify the existing left-side panel on Auth.tsx (desktop, lines 479-551) includes testimonials and value props",
        "Ensure the mobile version (lines 947-963) shows at least 2-3 key value props above the form",
        "Add a 'Trusted by 2,000+ parents' counter with animated number if not already present",
        "Add at least one short testimonial quote visible on mobile above the sign-up form",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 62,
      "passes": true,
      "notes": "Auth page desktop has social proof but mobile version hides most of it. Mobile users represent 60%+ of traffic and see less persuasion content."
    },
    {
      "id": "US-063",
      "title": "Add 'Author Bio' section and reading progress bar to Blog post page",
      "description": "As a blog reader, I want to see the author's credentials and my reading progress so that I trust the content and stay engaged through the article.",
      "acceptanceCriteria": [
        "Add a reading progress bar at the top of src/pages/BlogPost.tsx that shows how far the user has scrolled through the article",
        "Progress bar should be a thin line (2-3px) in the primary color, positioned sticky at the top of the viewport",
        "Add an 'About the Author' section after the article content showing author name, role/credentials, and a brief bio",
        "Author data should come from the blog post data or a sensible default ('EatPal Team')",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 63,
      "passes": true,
      "notes": "Reading progress bars increase average time on page by 10-20%. Author bios build E-E-A-T signals for SEO."
    },
    {
      "id": "US-064",
      "title": "Add 'Save and Resume' for multi-step lead magnet forms",
      "description": "As a user filling out the Meal Plan Generator or Budget Calculator, I want my progress auto-saved so that I can return and finish if I navigate away.",
      "acceptanceCriteria": [
        "Add localStorage auto-save to src/pages/MealPlanGenerator.tsx that saves form state on every field change",
        "Add localStorage auto-save to src/pages/BudgetCalculator.tsx with the same pattern",
        "On page load, check for saved state and show a 'Resume where you left off?' prompt if found",
        "Add a 'Start Fresh' button to clear saved state",
        "Clear saved state after successful form submission",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 64,
      "passes": false,
      "notes": "Long forms on mobile have high abandonment. Auto-save prevents frustration and increases completion rates."
    },
    {
      "id": "US-065",
      "title": "Add expected response time and department routing to Contact page",
      "description": "As a user seeking help, I want to know when I'll get a response and route my inquiry to the right team so that I feel confident my issue will be addressed.",
      "acceptanceCriteria": [
        "Add a prominent 'We respond within 24 hours on business days' badge at the top of src/pages/Contact.tsx",
        "Replace the generic Subject text input with a dropdown select: 'Account & Billing', 'Technical Support', 'Feature Requests', 'Partnership Inquiries', 'Other'",
        "Add a 'What happens next?' section below the form explaining the process: 1. We receive your message, 2. Our team reviews it, 3. You get a response via email",
        "Add a 'Check our FAQ first' nudge above the form linking to /faq",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 65,
      "passes": true,
      "notes": "Contact page has no response time expectation and a generic subject field. Setting expectations reduces anxiety and repeat inquiries."
    },
    {
      "id": "US-066",
      "title": "Add mobile-visible food safety badges to Pantry list items",
      "description": "As a mobile user managing my child's food library, I want to see food safety badges (Safe, Try Bite) on mobile so that I can quickly scan food status without tapping into each item.",
      "acceptanceCriteria": [
        "In src/components/pantry/PantryListItem.tsx, make safety badges visible on mobile by replacing 'hidden sm:flex' with a responsive layout that shows badges on all screen sizes",
        "Use smaller badge variants on mobile (text-xs) to fit within the compact layout",
        "Ensure badges don't cause text truncation or overflow on small screens (320px width)",
        "Test with food names of varying lengths (short: 'Rice', long: 'Chocolate Chip Cookie Dough Ice Cream')",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 66,
      "passes": true,
      "notes": "Safety badges are hidden on mobile (hidden sm:flex). Mobile users can't see the most important food classification at a glance."
    },
    {
      "id": "US-067",
      "title": "Add progress indicators and time estimates to lead magnet forms",
      "description": "As a user filling out a multi-section form, I want to see a progress bar and time estimate so that I know how much more effort is needed to complete it.",
      "acceptanceCriteria": [
        "Add a progress bar/stepper to src/pages/MealPlanGenerator.tsx showing completion across form sections (Family Details, Preferences, Equipment, Allergies)",
        "Add a time estimate label: 'About 5 minutes to complete'",
        "Add encouraging micro-copy at progress milestones: 'Halfway there!', 'Almost done!'",
        "Add a progress bar to src/pages/BudgetCalculator.tsx with similar treatment",
        "Progress bar should respect reduced motion preferences",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 67,
      "passes": false,
      "notes": "Both lead magnet forms are long with no progress indication. Users don't know how much more is required, leading to abandonment."
    },
    {
      "id": "US-068",
      "title": "Add keyboard shortcut help modal discoverable via ? key",
      "description": "As a power user, I want to see all available keyboard shortcuts in a modal so that I can navigate the app efficiently.",
      "acceptanceCriteria": [
        "Create a KeyboardShortcutsModal component that shows all available shortcuts in a categorized grid",
        "Trigger the modal when user presses '?' key (Shift + /)",
        "Include shortcuts from Dashboard.tsx (K, G, S, T) and any other registered shortcuts",
        "Add a '?' icon button in the dashboard header that also opens the modal",
        "Modal should be dismissible via Escape key",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 68,
      "passes": true,
      "notes": "Keyboard shortcuts exist but are completely undiscoverable. Power users who discover them become more engaged."
    },
    {
      "id": "US-069",
      "title": "Add contextual tooltips to dashboard stats cards and feature icons",
      "description": "As a user viewing my dashboard, I want to understand what each stat means so that I can interpret my data correctly.",
      "acceptanceCriteria": [
        "Add tooltips to stat cards on src/pages/Home.tsx explaining: 'Safe Foods' = foods your child consistently eats, 'Try Bites' = foods being introduced, 'Meals Planned' = meals scheduled this week, 'Grocery Items' = items on your current list",
        "Use the existing Tooltip component from shadcn-ui",
        "Add a small info icon (CircleHelp from lucide) next to each stat label that triggers the tooltip",
        "Ensure tooltips work on both hover (desktop) and tap (mobile)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 69,
      "passes": true,
      "notes": "Stats like 'Safe Foods' and 'Try Bites' use domain-specific terminology that new users may not understand."
    },
    {
      "id": "US-070",
      "title": "Add 404 page improvements with search, popular links, and contact CTA",
      "description": "As a user who lands on a non-existent page, I want helpful options to find what I'm looking for so that I don't leave the site entirely.",
      "acceptanceCriteria": [
        "Enhance src/pages/NotFound.tsx with: a search input, links to popular pages (Landing, Pricing, FAQ, Blog, Contact), and a 'Contact Support' link",
        "Add a friendly illustration or icon",
        "Add proper SEO meta tags (noindex) to prevent 404 pages from being indexed",
        "Track 404 hits in analytics so the team can fix broken links",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 70,
      "passes": true,
      "notes": "A good 404 page recovers potentially lost visitors. Current 404 page quality needs audit."
    },
    {
      "id": "US-071",
      "title": "Add Planner mobile feature parity for templates, copy week, and clear week",
      "description": "As a mobile user managing meal plans, I want access to save/load templates, copy week, and clear week actions so that I have the same capabilities as desktop users.",
      "acceptanceCriteria": [
        "In src/pages/Planner.tsx, add a 'More Actions' overflow menu (three-dot icon or kebab menu) to the mobile header",
        "Include in the menu: 'Save as Template', 'Load Template', 'Copy to Next Week', 'Clear This Week'",
        "Ensure each action opens the appropriate dialog or triggers the correct handler",
        "Match the existing desktop functionality exactly",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 71,
      "passes": false,
      "notes": "Mobile Planner is missing key features that desktop users have. This creates a frustrating experience for the 60%+ of users on mobile."
    },
    {
      "id": "US-072",
      "title": "Add reading time and category badges to Blog listing cards",
      "description": "As a blog reader browsing articles, I want to see estimated reading time and article category on each card so that I can choose what to read based on available time and interest.",
      "acceptanceCriteria": [
        "Add estimated reading time (e.g., '5 min read') to each blog card in src/pages/Blog.tsx",
        "Calculate reading time from article content length (average 200 words/minute)",
        "Add category badge on each card matching the article's category",
        "Add author name to each card if available",
        "Ensure responsive layout doesn't break with added elements",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 72,
      "passes": false,
      "notes": "Blog cards show minimal metadata. Reading time and categories help users choose content, increasing engagement and time on site."
    },
    {
      "id": "US-073",
      "title": "Add persistent bottom safe-area padding to prevent content hidden behind mobile nav",
      "description": "As a mobile user, I want all page content visible above the bottom navigation bar so that I don't miss information or buttons cut off at the bottom of the page.",
      "acceptanceCriteria": [
        "Add pb-20 (or equivalent safe-area padding) to the main content wrapper in src/pages/Dashboard.tsx for all child routes",
        "Verify the padding applies to: Home, Pantry, Recipes, Planner, Grocery, Kids, FoodTracker, Progress, FoodChaining, MealBuilder",
        "Ensure the padding does not apply on desktop where there is no bottom nav",
        "Use 'pb-20 md:pb-0' or similar responsive approach",
        "Test on iPhone SE (375px) and iPad (768px) viewports",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 73,
      "passes": true,
      "notes": "Content at the bottom of pages gets hidden behind the mobile bottom navigation bar. Critical usability issue."
    },
    {
      "id": "US-074",
      "title": "Add Grocery list progress percentage and smart completion messages",
      "description": "As a user shopping with my grocery list, I want to see a percentage of items checked off and encouraging messages as I progress so that shopping feels like an accomplishment.",
      "acceptanceCriteria": [
        "In src/pages/Grocery.tsx, enhance the existing progress bar (lines 569-587) to show percentage text: '8 of 12 items (67%)'",
        "Add milestone messages at 25% ('Great start!'), 50% ('Halfway there!'), 75% ('Almost done!'), and 100% ('Shopping complete!')",
        "Show a celebration animation or confetti effect at 100% completion",
        "Add an 'Add to Pantry' prompt when all items are checked to sync purchased items",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 74,
      "passes": true,
      "notes": "The grocery list has a progress bar but minimal celebration or encouragement. Gamifying the shopping experience increases feature usage."
    },
    {
      "id": "US-075",
      "title": "Add child profile completion indicator to Kids page",
      "description": "As a parent managing child profiles, I want to see how complete each profile is so that I know what information to add for better meal recommendations.",
      "acceptanceCriteria": [
        "Add a 'Profile X% complete' progress indicator to each child card on src/pages/Kids.tsx",
        "Calculate completeness based on: name (required), age, allergens list, safe foods count (\u22655), preferences, and completed intake questionnaire",
        "Show a 'Complete Profile' button for profiles under 80% completion",
        "Add tooltip explaining what fields improve recommendations",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 75,
      "passes": true,
      "notes": "Users don't know what data improves recommendations. Profile completion indicators guide users to provide the data that makes AI suggestions better."
    },
    {
      "id": "US-076",
      "title": "Overhaul hero section messaging for ARFID and food chaining positioning",
      "description": "As a parent searching for ARFID help, I want the hero section to immediately tell me this app is built for extreme picky eating and feeding disorders so that I know it's not just another generic meal planner.",
      "acceptanceCriteria": [
        "Hero headline references ARFID, extreme picky eating, and progress (e.g. 'Turn mealtime battles into steady progress, one safe bite at a time')",
        "Subheadline explicitly mentions: AI-powered meal planning, food chaining science, built for families with ARFID/extreme picky eating, collaboration with feeding therapists",
        "Primary CTA changed to 'Get Your Personalized 5-Day Plan' with subtext 'Takes 2 minutes. Tailored to your child's safe foods.'",
        "Secondary CTA/link added: 'For Feeding Therapists ' linking to therapist section",
        "Stats section updated to include therapist count (200+ feeding therapists)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 76,
      "passes": true,
      "notes": "Highest impact change for conversion. Parents searching for ARFID/food chaining solutions need to see this is specifically for them within 3 seconds of landing on the page."
    },
    {
      "id": "US-077",
      "title": "Add clinical trust strip and evidence-based credibility bar under hero",
      "description": "As a parent evaluating EatPal, I want to see clinical credibility and therapist endorsement immediately below the hero so that I trust this app is evidence-based and not just marketing.",
      "acceptanceCriteria": [
        "Add a trust strip section directly under the hero with at least 3 proof points",
        "Include: 'Built with 200+ feeding therapists and dietitians' or similar clinical credibility statement",
        "Include: 'Grounded in food chaining, an evidence-based approach used worldwide'",
        "Include: 'Used in outpatient feeding clinics, private practices, and by families at home'",
        "Trust strip uses Shield, Award, or similar credibility icons",
        "Visually distinct from hero section (subtle background differentiation)",
        "Mobile layout preserves readability (stack vertically on small screens)",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 77,
      "passes": true,
      "notes": "Trust strip is critical for conversion. Parents of ARFID children are high-anxiety and need immediate clinical validation before exploring further."
    },
    {
      "id": "US-078",
      "title": "Replace pain points section with ARFID-specific problem/solution messaging",
      "description": "As a parent of a child with ARFID, I want the landing page to articulate why generic meal planning apps fail for feeding disorders so that I understand how EatPal is different.",
      "acceptanceCriteria": [
        "Section heading references ARFID and extreme picky eating specifically (e.g. 'Why typical meal planning apps fail for ARFID and extreme picky eating')",
        "Include 3-4 specific failure modes of generic approaches: assumes kids will 'just try it', generic 'offer variety' advice increases anxiety, feeding therapy progress stalls without structured home support",
        "Follow with 3-4 solution bullets on how EatPal is built specifically for feeding disorders: food chaining bridges from safe foods to new foods, plans around sensory preferences and triggers, keeps parents and therapists aligned",
        "Uses empathetic, non-blaming tone per brand voice guidelines",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 78,
      "passes": true,
      "notes": "This section must differentiate EatPal from generic meal planning apps. Parents of ARFID children have tried standard approaches and need to know this is different."
    },
    {
      "id": "US-079",
      "title": "Add therapist/clinic section on homepage with professional positioning",
      "description": "As a feeding therapist or clinic director, I want a dedicated section on the homepage addressing professional use so that I understand how EatPal supports clinical workflows and can extend therapy into the home.",
      "acceptanceCriteria": [
        "Add a section with heading 'The Operating System for Feeding Therapy' or similar",
        "Include 3-4 therapist-specific benefits: create and share individualized food chains, capture real-time meal logs between sessions, standardize data collection across therapists, improve outcomes with structured home follow-through",
        "Include CTA to therapist plans/pricing",
        "Section visually distinct (different background or card treatment) to signal B2B audience",
        "Positioned before the final CTA section on the landing page",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 79,
      "passes": true,
      "notes": "Therapist adoption is both validation and distribution. Feeding therapists who adopt EatPal refer families to the parent app, creating a flywheel for B2C acquisition."
    },
    {
      "id": "US-080",
      "title": "Update three-pillar value proposition cards for niche positioning",
      "description": "As a visitor, I want to see three clear value pillars (evidence-based progress, calmer mealtimes, therapist-designed) so that I understand EatPal's unique differentiation from generic meal apps.",
      "acceptanceCriteria": [
        "Replace or update the 6-card features section with 3 focused value proposition cards",
        "Card 1: 'Evidence-Based Progress, Not Guesswork' - AI grounded in food chaining, detects patterns in textures/brands/flavors",
        "Card 2: 'Calmer, Safer-Feeling Mealtimes' - visual progress charts, structured daily plans",
        "Card 3: 'Designed With Feeding Therapists' - supports food logs, safe-food lists, optional therapist portal",
        "Each card contains 2-3 benefit-oriented bullets, not raw features",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 80,
      "passes": false,
      "notes": "Three focused pillars are more effective than six generic feature cards for communicating niche positioning to high-anxiety parents."
    },
    {
      "id": "US-081",
      "title": "Update Auth page messaging for ARFID and feeding disorder positioning",
      "description": "As a parent signing up, I want the auth page to reinforce that EatPal is for ARFID and feeding disorders so that I feel confident I'm in the right place.",
      "acceptanceCriteria": [
        "Update left panel headline from 'End Mealtime Battles Forever' to ARFID-specific messaging",
        "Update subheadline to mention food chaining, ARFID, and feeding therapist collaboration",
        "Update value propositions to emphasize evidence-based approach, not generic meal planning",
        "Add ARFID-specific testimonial or social proof element",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 81,
      "passes": false,
      "notes": "The auth page is the last touchpoint before conversion. Consistent ARFID positioning reinforces the parent's decision to sign up."
    },
    {
      "id": "US-082",
      "title": "Update SEO meta tags and structured data for ARFID keyword targeting",
      "description": "As an SEO strategy, I want meta titles, descriptions, and structured data to target high-intent ARFID and food chaining keywords so that we capture organic search traffic from parents seeking help.",
      "acceptanceCriteria": [
        "Update homepage meta title to prominently feature ARFID (e.g. 'EatPal: ARFID & Picky Eater Meal Planner | Food Chaining Science')",
        "Update homepage meta description to lead with ARFID/feeding disorder positioning",
        "Ensure FAQ schema includes ARFID-specific Q&As for rich snippet eligibility",
        "Add structured data for ARFID-related use cases in AI search metadata",
        "Target keywords: 'ARFID meal plan for kids', 'food chaining examples', 'picky eater meal plan app', 'feeding therapy at home tools'",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 82,
      "passes": false,
      "notes": "ARFID search volume is growing as the diagnosis becomes more recognized. Capturing these high-intent keywords drives qualified traffic with high conversion potential."
    },
    {
      "id": "US-083",
      "title": "Organize blog with ARFID content pillars and category structure",
      "description": "As a content marketer, I want blog posts organized by ARFID/food chaining content pillars so that we build topical authority and support SEO clustering strategy.",
      "acceptanceCriteria": [
        "Add content pillar categories: 'ARFID & Feeding Disorders 101', 'Food Chaining in Real Life', 'Meal Planning for Selective Eaters', 'Autism & Sensory Mealtime Support', 'For Therapists & Clinics'",
        "Update blog page to display category filters matching these pillars",
        "Each category has a brief description visible on the blog page",
        "Blog post cards show their category tag",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 83,
      "passes": false,
      "notes": "Content pillars are the backbone of organic acquisition. Each pillar targets a cluster of related keywords and drives traffic to the app signup funnel."
    },
    {
      "id": "US-084",
      "title": "Update Pricing page with clearer parent vs therapist plan positioning",
      "description": "As a visitor deciding on a plan, I want pricing to clearly differentiate parent plans from therapist/clinic plans so that I can quickly identify which plan is for me.",
      "acceptanceCriteria": [
        "Separate pricing into two clearly labeled sections: 'For Families' and 'For Therapists & Clinics'",
        "Parent plans emphasize: food chaining, AI meal plans, progress tracking, grocery lists",
        "Therapist plans emphasize: multi-client management, food chain design tools, shared progress data, insurance-compatible documentation",
        "Each section has audience-specific copy (parent-friendly vs clinically-oriented)",
        "Clear entry point for small therapist accounts (e.g. 'Start with 3 families')",
        "Typecheck passes",
        "npm run build succeeds"
      ],
      "priority": 84,
      "passes": false,
      "notes": "Mixed B2C/B2B pricing confuses both audiences. Clear separation helps each persona identify their plan in under 30 seconds."
    }
  ]
}