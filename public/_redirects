# Cloudflare Pages _redirects file for EatPal
# https://developers.cloudflare.com/pages/platform/redirects/

# Force HTTPS and consistent domain
https://www.tryeatpal.com/* https://tryeatpal.com/:splat 301!
http://tryeatpal.com/* https://tryeatpal.com/:splat 301!
http://www.tryeatpal.com/* https://tryeatpal.com/:splat 301!

# Explicitly serve static files (prevent React Router from catching them)
/sitemap.xml /sitemap.xml 200
/robots.txt /robots.txt 200
/manifest.json /manifest.json 200
/favicon.ico /favicon.ico 200
/*.png /:splat.png 200
/*.jpg /:splat.jpg 200
/*.svg /:splat.svg 200
/*.webp /:splat.webp 200
/*.woff2 /:splat.woff2 200

# Common authentication redirects
/signup /auth?tab=signup 302
/signin /auth?tab=signin 302
/login /auth?tab=signin 302
/register /auth?tab=signup 302

# Help and support redirects
/help /contact 301
/support /contact 301

# Social media redirects
/instagram https://instagram.com/eatpal 302
/facebook https://facebook.com/eatpal 302
/twitter https://twitter.com/eatpal 302

# Legacy URL patterns (if any)
/dashboard /  302

# Admin panel redirect if not authenticated
/admin /auth?redirect=/admin 302

# Handle trailing slashes consistently
/kids/ /kids 301
/planner/ /planner 301
/tracker/ /tracker 301
/recipes/ /recipes 301
/pantry/ /pantry 301
/grocery/ /grocery 301

# SPA fallback - MUST BE LAST
# This ensures all unmatched routes go to index.html for client-side routing
/* /index.html 200

